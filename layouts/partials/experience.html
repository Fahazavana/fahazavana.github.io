{{ $lang := .Site.Language.Lang }}
{{ $experience := index .Site.Data.content.experience $lang }}

{{ if and $experience (or (not (isset $experience "enable")) $experience.enable) }}
<section id="experience" class="container mx-auto">
    <div class="py-12 md:py-16 bg-background transition-colors duration-300 container mx-auto ">
        <div class="px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-foreground">
                    {{ $experience.title | default "Experience" }}
                </h2>
            </div>

            <div class="relative w-max mx-auto">
                <!-- Vertical timeline line -->
                <div class="absolute left-2.5 h-full w-[2px] bg-foreground"></div>

                <ul class="space-y-12">
                    {{ range $i, $e := $experience.experience_list }}
                    <li class="timeline-event relative group">

                        <!-- Icon -->
                        <div>
                            <div class="timeline-event-icon absolute md:static flex items-center justify-center w-6 h-6 bg-muted rounded-full ring-8 ring-background left-3 md:left-auto md:mr-4 top-0 transition-transform duration-200 group-hover:-rotate-45">
                                <svg class="w-3 h-3 text-foreground" fill="currentColor"
                                     viewBox="0 0 20 20">
                                    <path d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4Z"/>
                                    <path d="M0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"/>
                                </svg>
                            </div>
                            {{ with $e.duration }}
                            <div class="absolute top-0 left-12 block h-6 text-sm px-3 bg-muted text-foreground rounded-full">
                                {{ . | markdownify }}
                            </div>
                            {{ end }}
                        </div>


                        <!-- Card -->
                        <div class="ml-10 timeline-event-copy mt-5  p-6 bg-card rounded-lg border border-border shadow-sm transition-colors duration-500 ease-in group-hover:bg-muted/10">
                            <h3 class="text-2xl font-semibold mb-2">{{ $e.title | markdownify }}</h3>
                            {{ with $e.company }}
                            <span class="block text-sm text-muted">{{ . | markdownify }}</span>
                            {{ end }}
                            {{ range $e.details }}
                            <p class="mt-2 text-base text-muted">{{ . }}</p>
                            {{ end }}
                        </div>
                    </li>
                    {{ end }}
                </ul>
            </div>
        </div>
    </div>
</section>
{{ end }}
